{% extends 'attendance/base.html' %}
{% load static %}

{% block title %}Administrator's section{% endblock %}
{% block aside %}
<div class="panel panel-default">
  <div class="panel-heading">
    <h3 class="panel-title">
      <i class="fa fa-calendar-check-o panel-icon" aria-hidden="true"></i>
      Date selection
    </h3>

  </div>
  <div class="panel-body">
      <div class="row">
          <div class="col-xs-4">
         <p>Year: </p>
         </div>
         <div class="col-xs-8">
            <div class="btn-group btn-block ">
                <button type="button" class="btn btn-default btn-block  dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                2017 <span class="caret"></span>
                </button>
                    <ul class="dropdown-menu">
                    <li><a href="#">2015</a></li>
                    <li><a href="#">2016</a></li>
                    <li><a href="#">2017</a></li>
                </ul>
            </div>
         </div>
         <div>&nbsp;</div>
         <div class="col-xs-4">
             <p>Month: </p>
         </div>
         <div class="col-xs-8">
            <div class="btn-group btn-block ">
                <button type="button" class="btn btn-default btn-block  dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                January <span class="caret"></span>
                </button>
                    <ul class="dropdown-menu">
                    <li><a href="#">January <span class="pull-right">[01]</span></a></li>
                    <li><a href="#">February <span class="pull-right">[02]</span></a></li>
                    <li><a href="#">March <span class="pull-right">[03]</span></a></li>
                </ul>
            </div>
         </div>
      </div>
  </div>
</div>

<div class="panel panel-default">
  <div class="panel-heading clickable">
    <h3 class="panel-title">
      <i class="fa fa-question panel-icon" aria-hidden="true"></i>
      Helpers
    </h3>
  </div>
  <div class="panel-body">
  	<table class="table table-condensed table-primary-inverse">
			<tr>
				<td><i class="fa fa-exchange fa-rotate-90" aria-hidden="true"></i></td>
				<td>Sorting enabled</td>
			</tr>
			<tr>
				<td><i class="fa fa-sort-amount-asc" aria-hidden="true"></i></td>
				<td>Ascend sorting</td>
			</tr>
			<tr>
				<td><i class="fa fa-sort-amount-desc" aria-hidden="true"></i></td>
				<td>Descend sorting</td>
			</tr>
		</table>
  </div>
</div>
{% endblock %}

{% block content %}
<div class="page-header">
  <h1><i class="fa fa-diamond" aria-hidden="true"></i> Admin <small>- for administrators only</small></h1>
</div>
<ul class="nav nav-tabs">
  <li class="active"><a href="#with-sessions" data-toggle="tab">Users With Sessions</a></li>
  <li><a href="#without-sessions" data-toggle="tab">Users Without Sessions</a></li>
</ul>
<div class="tab-content">
  <div id="with-sessions" class="tab-pane fade in active">
    <div class="panel panel-default">
      <div class="panel-heading">
        <div class="">
          <h2 class="text-center"><i class="fa fa-smile-o"></i> Users with sessions</h2>
        </div>
      </div>
      <div class="panel-body">
        <table id="users-with-sessions" class="table table-striped  table-responsive table-hover table-primary" cellspacing="0" width="100%">
          <thead class = "thead-inverse">
            <tr class="upper">
              <th>Last name</th>
              <th>FIRST NAME</th>
              <th>USERNAME</th>
              <th>WORK HOURS</th>
              <th>NOT WORK HOURS </th>
              <th>HOURS UNASSIGNED</th>
              <th>HOURS TOTAL</th>
              <th>LOOKS OK</th>
              <th>DETAIL</th>
            </tr>
          </thead>
          <tbody>
            {% for user in user_data %}
              <tr
              {% if user.looks_ok %}
                class="success"
              {% endif %}>
                <td>{{user.user.last_name}}</td>
                <td>{{user.user.first_name}}</td>
                <td>{{user.user.username}}</a></td>
                <td><strong>{{user.hours_work |floatformat:2}}</strong></td>
                 <td>{{user.hours_not_work |floatformat:2}}</td>
                <td>{{user.hours_unassigned |floatformat:2}}</td>
                <td>{{user.hours_total |floatformat:2}}</td>
                <td>{{user.looks_ok | yesno:"OK, Probably Wrong" }}</td>
                <td><a href="{% url 'sessions_month' username=user.user.username year=year month=month %}" type="button" class="btn btn-xs btn-info">Detail</a></td>
              </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    </div>
  </div>
  <div id="without-sessions" class="tab-pane fade">
    <div class="panel panel-default">
      <div class="panel-heading">
        <div class="">
          <h2 class="text-center"><i class="fa fa-frown-o"></i> Users without sessions</h2>
        </div>
      </div>
      <div class="panel-body">
        <table id="users-without-sessions" class="table table-striped table-responsive table-hover table-default" cellspacing="0" width="100%">
          <thead class = "">
            <tr class="upper">
              <th>Last name</th>
              <th>First name</th>
              <th>Username</th>
              <th>Detail</th>
            </tr>
          </thead>
          <tbody>
            {% for user in empty_users %}
              <tr>
                <td>{{user.last_name}}</td>
                <td>{{user.first_name}}</td>
                <td>{{user.username}}</a></td>
                <td><a href="{% url 'sessions_month' username=user.username year=year month=month %}" type="button" class="btn btn-xs btn-info">Detail</a></td>
              </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>


<script type="text/javascript">
$(document).ready(function(){
  $('#users-with-sessions').DataTable();
  $('#users-without-sessions').DataTable();
});
</script>
{% endblock %}
